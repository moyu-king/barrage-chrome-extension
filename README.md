# Barrage Chrome Extension

一个使用[vue3](https://cn.vuejs.org/)及[@crxjs/vite-plugin](https://github.com/crxjs/chrome-extension-tools)插件开发的chrome拓展程序。给予『无宗门背景的散修』游历于各大视频资源平台时弹幕支持。

插件提供两种版本，**本地版本**和**服务版本**，本地版本无需启动服务，安装插件即可使用，而服务版本需要启动弹幕服务（[仓库地址](https://github.com/moyu-king/barrage-service)），后续也会持续拓展在线弹幕等等功能。如果只是希望能看视频有弹幕，推荐使用本地版本。

#### 1. 安装：
[下载压缩包](https://github.com/moyu-king/barrage-chrome-extension/releases)，解压完后，在chrome的拓展程序界面点击**加载已解压的扩展程序**，并选中解压后的文件夹。（需请先勾选开发者模式）

#### 2. 使用
1. 添加视频

安装完插件后，是没有视频数据的（播放列表为空），需要自行前往目标网站的视频播放页面添加，比如 bilibili 的播放地址为 https://www.bilibili.com/bangumi/play/xxx 。来到对应的页面点击“+”图标，插件会先自动获取目标网站对应的信息，然后可以根据你的需求对名称进行修改，最后点击保存即可。

![添加视频](/images/add.png)
2. 弹幕播放
- **自动播放模式**

  插件默认为该模式，在该模式下，只需选中对应的播放集数，然后弹幕时间轴即可与视频播放器的时间轴同步，暂停也同样生效。

  【自动播放】图例如下：

  ![自动播放弹幕](/images/auto-barrage.png)

- **自定义播放模式**

  在该模式下，会有自定义的播放进度条。同样选择对应播放集数后，然后根据需要，可先调整好开始播放时间，然后点击播放按钮即可。

  【自定义播放】图例如下：

  ![自定义播放弹幕](/images/custom-barrage.png)

> 【自动播放模式】不是每个视频网站都会生效，所以以【自定义播放模式】作为后备方案。不生效的原因，其一，当前页面如果视频播放器不止一个，插件自动识别有可能会出现选错播放器的情况，其二，就是找不到播放器。

识别失败提示：

![自定义播放弹幕](/images/error-tip.png)

3. 播放模式切换

- **全局切换**

  全局切换作为插件配置项，会将配置缓存起来，下次打开浏览器依旧生效。

  ![全局切换](/images/global-switch-mode.png)

- **临时切换**

  临时切换模式，不会缓存配置项，关闭当前标签页即失效。

  ![临时切换](/images/switch-mode.png)

4. 重置弹幕

  当不想显示弹幕，或者视频提前退出时（视频退出弹幕不会消失），点击重置按钮即可将弹幕面板重置并清空。

  ![临时切换](/images/reset.png)

5. 视频删除与重命名

  右键对应的视频标签即可弹出菜单。

  ![右键菜单](/images/context-menu.png)

6. 更新插件

在本地版本中，由于使用的是 `indexDB` 存储的数据，直接卸载重装会丢失之前的数据。正确的做法是，先下载并解压新版本压缩包，然后把**原来已加载的扩展程序目录**下的文件删除，将新的文件替换，最后点击拓展程序的更新按钮即可完成更新。

![更新插件](/images/update.png)
> 目前仅支持腾讯视频与bilibili，后续也会持续拓展，有建议欢迎反馈。
